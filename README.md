# GIF工具箱
一个功能丰富的动图（GIF/APNG/WebP）处理插件，提供了视频转动图、精灵图合成、速度调整、网格裁剪和逐帧分解等多种实用功能。

## 功能列表 & 使用说明

### 1. 视频转动图

将视频文件或视频链接转换为动图格式（默认为GIF，可在配置中修改为APNG或WebP）。支持精细的参数控制，并能对生成的过大文件进行智能压缩。

- **指令:** `视频转gif [参数]`
- **使用方法:** 回复一个视频消息，或在指令后附上视频链接，并可选择性添加参数。
- **参数:**
    - **时间区间:**
        - `1s-5.5s`: 截取视频的第1秒到第5.5秒。
        - `开始 2s 时长 3`: 从第2秒开始，截取3秒长度。
    - **抽帧/帧率:**
        - `fps 10`: 设置输出动图的帧率为10。
        - `1/3`: 每3帧取1帧。
    - **缩放:**
        - `0.5`: 将视频尺寸缩放为原尺寸的50%。

**示例:** `视频转gif 2s-4.5s fps 15 0.5`

| <img src="./11/0.png" width="400"> |
|:---:|
| *视频转GIF效果* |

---

### 2. 精灵图合成GIF

将一张包含多个小图的精灵图（Sprite Sheet）合成为一个GIF动画。

- **指令:**
    - `合成1gif [参数]`: 使用算法1，逐行逐格地将图片拼接为动画。
    - `合成2gif [参数]`: 使用算法2，优化了透明背景和颜色抖动处理。
- **使用方法:** 回复一张雪碧图并发送指令。
- **参数:**
    - **网格:** `6x6` - 指定精灵图是`6行6列`的网格。
    - **帧时长:** `0.1` - 指定动画每帧的播放时间为0.1秒。
    - **边距:** `边距上10 左5` - 在处理图片前，预先裁剪掉指定的边距。

**示例:** `合成1gif 8x8 0.05s 边距10`

| <img src="./11/1.png" width="400"> |
|:---:|
| *合成GIF效果* |

---

### 3. GIF变速

加快或减慢一个GIF的播放速度。

- **指令:** `(gif)加速/减速 [倍数]` 或 `(gif)变快/变慢 [倍数]`
- **使用方法:** 回复一个GIF并发送指令。
- **参数:** `[倍数]` - 加速或减速的倍率，例如 `2` 代表2倍速。默认为2倍。

**示例:** `gif加速 1.5`、`变慢 2`

| <img src="./11/2.png" width="400"> |
|:---:|
| *GIF变速效果* |

---

### 4. 网格裁剪

将一张图片精确地裁剪成指定行列的网格小图，并以合并转发的形式发送。

- **指令:** `裁剪 [参数]`
- **使用方法:** 回复一张图片并发送指令。
- **参数:**
    - **网格:** `3x4` - 将图片裁剪为`3行4列`。
    - **边距:** `边距10` - 裁剪前先去除图片四周各10像素的边距。

**示例:** `裁剪 2x5 边距上20`

| <img src="./11/3.png" width="400"> |
|:---:|
| *裁剪效果* |

---

### 5. GIF分解

将一个GIF动画分解成独立的静态帧，并以合并转发的形式发送。

- **指令:** `gif分解`
- **使用方法:** 回复一个GIF并发送指令。

| <img src="./11/4.png" width="400"> |
|:---:|
| *GIF分解效果* |

## 插件配置

插件支持在配置文件中进行一些默认行为的调整。

```json
{
    "output_format": "GIF",      // 视频转动图的输出格式: "GIF", "APNG", "WEBP"
    "default_scale": 0.3,        // 视频转动图的默认缩放比例
    "default_fps": 10,           // 视频转动图的默认帧率
    "max_gif_duration": 10.0,    // 允许截取视频的最大时长（秒）
    "max_video_size_mb": 50.0,   // 允许下载处理的视频最大体积（MB）
    "gif_max_colors": 256        // 生成GIF时的最大颜色数 (2-256)
}
```
